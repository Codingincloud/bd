\chapter*{APPENDIX}
\addcontentsline{toc}{chapter}{APPENDIX}

\section*{A. System Screenshots}

% Add screenshots when available
% \begin{figure}[H]
% \centering
% \includegraphics[width=\textwidth]{images/homepage.png}
% \caption{System Homepage}
% \end{figure}

% \begin{figure}[H]
% \centering
% \includegraphics[width=\textwidth]{images/login.png}
% \caption{Login Page}
% \end{figure}

% \begin{figure}[H]
% \centering
% \includegraphics[width=\textwidth]{images/donor_dashboard.png}
% \caption{Donor Dashboard}
% \end{figure}

% \begin{figure}[H]
% \centering
% \includegraphics[width=\textwidth]{images/admin_dashboard.png}
% \caption{Administrator Dashboard}
% \end{figure}

% \begin{figure}[H]
% \centering
% \includegraphics[width=\textwidth]{images/map_interface.png}
% \caption{Interactive Map Interface}
% \end{figure}

\section*{B. Code Snippets}

\subsection*{B.1 Key Model Definitions}

\begin{lstlisting}[language=Python, caption=Donor Model]
class Donor(models.Model):
    BLOOD_GROUPS = [
        ('A+', 'A+'), ('A-', 'A-'),
        ('B+', 'B+'), ('B-', 'B-'),
        ('O+', 'O+'), ('O-', 'O-'),
        ('AB+', 'AB+'), ('AB-', 'AB-'),
    ]
    
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    blood_group = models.CharField(max_length=3, choices=BLOOD_GROUPS)
    date_of_birth = models.DateField()
    phone_number = models.CharField(max_length=15)
    address = models.TextField()
    city = models.CharField(max_length=100)
    latitude = models.DecimalField(max_digits=10, decimal_places=8, null=True)
    longitude = models.DecimalField(max_digits=11, decimal_places=8, null=True)
    last_donation_date = models.DateField(null=True, blank=True)
    
    def is_eligible(self):
        if not self.last_donation_date:
            return True
        days_since = (timezone.now().date() - self.last_donation_date).days
        return days_since >= 56
\end{lstlisting}

\subsection*{B.2 Eligibility Verification}

\begin{lstlisting}[language=Python, caption=Eligibility Calculation]
def calculate_eligibility(donor):
    """Calculate if donor is eligible to donate"""
    
    # Check last donation date (56-day rule)
    if donor.last_donation_date:
        days_since = (timezone.now().date() - donor.last_donation_date).days
        if days_since < 56:
            return False, f"Must wait {56 - days_since} more days"
    
    # Check age (18-65 years)
    age = calculate_age(donor.date_of_birth)
    if age < 18:
        return False, "Must be at least 18 years old"
    if age > 65:
        return False, "Must be under 65 years old"
    
    # Check latest health metrics
    latest_metrics = donor.health_metrics.order_by('-recorded_at').first()
    
    if latest_metrics:
        if latest_metrics.weight < 50:
            return False, "Weight must be at least 50 kg"
        
        if latest_metrics.hemoglobin_level < 12.5:
            return False, "Hemoglobin level too low"
        
        if latest_metrics.blood_pressure_systolic > 180:
            return False, "Blood pressure too high"
    
    return True, "Eligible to donate"
\end{lstlisting}

\subsection*{B.3 Emergency Donor Matching}

\begin{lstlisting}[language=Python, caption=Donor Matching Algorithm]
def match_donors_for_emergency(blood_group, hospital):
    """Match eligible donors for emergency blood request"""
    
    # Get compatible blood types
    compatibility = {
        'A+': ['A+', 'A-', 'O+', 'O-'],
        'A-': ['A-', 'O-'],
        'B+': ['B+', 'B-', 'O+', 'O-'],
        'B-': ['B-', 'O-'],
        'AB+': ['A+', 'A-', 'B+', 'B-', 'O+', 'O-', 'AB+', 'AB-'],
        'AB-': ['A-', 'B-', 'O-', 'AB-'],
        'O+': ['O+', 'O-'],
        'O-': ['O-'],
    }
    
    compatible_types = compatibility.get(blood_group, [])
    
    # Query eligible donors
    eligible_donors = []
    for donor in Donor.objects.filter(blood_group__in=compatible_types):
        is_eligible, _ = calculate_eligibility(donor)
        if is_eligible:
            # Calculate distance from hospital
            distance = calculate_distance(
                donor.latitude, donor.longitude,
                hospital.latitude, hospital.longitude
            )
            eligible_donors.append((donor, distance))
    
    # Sort by distance and return top 20
    eligible_donors.sort(key=lambda x: x[1])
    return [donor for donor, _ in eligible_donors[:20]]
\end{lstlisting}

\section*{C. Database Schema Diagram}

% Add ER diagram when available
% \begin{figure}[H]
% \centering
% \includegraphics[width=\textwidth]{images/er_diagram.png}
% \caption{Complete Database Schema}
% \end{figure}

\section*{D. System Architecture Diagram}

% Add architecture diagram when available
% \begin{figure}[H]
% \centering
% \includegraphics[width=\textwidth]{images/architecture.png}
% \caption{System Architecture}
% \end{figure}

\section*{E. User Manual Excerpts}

\subsection*{E.1 For Donors}

\textbf{Registration:}
\begin{enumerate}
    \item Visit the system homepage
    \item Click "Register" button
    \item Select "Donor" role
    \item Fill in personal information
    \item Enter blood group and date of birth
    \item Provide contact details
    \item Create username and password
    \item Submit the form
\end{enumerate}

\textbf{Scheduling Donation:}
\begin{enumerate}
    \item Login to donor dashboard
    \item Check eligibility status
    \item Click "Schedule Donation"
    \item Select hospital from dropdown
    \item Choose preferred date
    \item Add any notes
    \item Submit request
    \item Wait for admin approval
\end{enumerate}

\subsection*{E.2 For Administrators}

\textbf{Approving Donation Requests:}
\begin{enumerate}
    \item Login to admin dashboard
    \item Navigate to "Manage Requests"
    \item View pending requests list
    \item Click on request to view details
    \item Verify donor eligibility
    \item Click "Approve" or "Reject"
    \item Add remarks if needed
    \item Submit decision
\end{enumerate}

\textbf{Managing Blood Inventory:}
\begin{enumerate}
    \item Login to admin dashboard
    \item Navigate to "Blood Inventory"
    \item View current stock levels
    \item Click "Update Stock" for blood group
    \item Enter new units available
    \item Save changes
    \item View updated inventory
\end{enumerate}

\section*{F. Installation Guide}

\subsection*{F.1 Prerequisites}
\begin{itemize}
    \item Python 3.12 or higher
    \item PostgreSQL 13 or higher
    \item pip (Python package manager)
    \item Git (for version control)
\end{itemize}

\subsection*{F.2 Installation Steps}

\begin{lstlisting}[language=bash]
# Clone repository
git clone https://github.com/Codingincloud/BDIMS.git
cd BDIMS

# Create virtual environment
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Configure database
# Edit blood_donation/settings.py with your PostgreSQL credentials

# Run migrations
python manage.py migrate

# Create superuser
python manage.py createsuperuser

# Collect static files
python manage.py collectstatic

# Run development server
python manage.py runserver
\end{lstlisting}

\subsection*{F.3 Configuration}

Edit \texttt{blood\_donation/settings.py}:

\begin{lstlisting}[language=Python]
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'your_database_name',
        'USER': 'your_username',
        'PASSWORD': 'your_password',
        'HOST': 'localhost',
        'PORT': '5432',
    }
}

# For production
DEBUG = False
ALLOWED_HOSTS = ['yourdomain.com']
SECRET_KEY = 'your-secret-key-here'
\end{lstlisting}

\section*{G. Glossary}

\begin{itemize}
    \item \textbf{BDIMS:} Blood Donor Information Management System
    \item \textbf{Django:} High-level Python web framework
    \item \textbf{PostgreSQL:} Open-source relational database
    \item \textbf{ORM:} Object-Relational Mapping
    \item \textbf{MVT:} Model-View-Template architectural pattern
    \item \textbf{CSRF:} Cross-Site Request Forgery
    \item \textbf{56-day Rule:} Minimum interval between blood donations
    \item \textbf{Hemoglobin:} Protein in red blood cells that carries oxygen
    \item \textbf{Blood Type Compatibility:} Ability of different blood types to be transfused
    \item \textbf{Reverse Geocoding:} Converting coordinates to human-readable address
\end{itemize}

\section*{H. Team Contributions}

\begin{table}[h]
\centering
\begin{tabular}{|l|l|}
\hline
\textbf{Team Member} & \textbf{Primary Responsibilities} \\
\hline
Bishal Shrestha & Backend Development, Database Design \\
Chirayu Shrestha & Frontend Development, UI/UX Design \\
Pappu Yadav & Testing, Documentation, Quality Assurance \\
Prashant Ghimire & Project Management, Integration, Deployment \\
\hline
\end{tabular}
\end{table}

\section*{I. Project Timeline}

\begin{table}[h]
\centering
\begin{tabular}{|l|l|l|}
\hline
\textbf{Phase} & \textbf{Duration} & \textbf{Status} \\
\hline
Requirement Analysis & 2 weeks & Completed \\
System Design & 2 weeks & Completed \\
Database Design & 1 week & Completed \\
Backend Development & 3 weeks & Completed \\
Frontend Development & 2 weeks & Completed \\
Integration & 1 week & Completed \\
Testing & 2 weeks & Completed \\
Documentation & 1 week & Completed \\
\hline
\textbf{Total} & \textbf{14 weeks} & \textbf{Completed} \\
\hline
\end{tabular}
\end{table}
